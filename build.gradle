allprojects {
    configurations {
        compileClasspath
    }
}

defaultTasks 'build'

subprojects {

    apply plugin: 'java'
    apply plugin: 'maven-publish'


    project.ext.archiveName = "midnightcore"
    project.ext.modid = "midnightcore"
    project.ext.modclass = "MidnightCore"
    project.ext.modname = "MidnightCore"
    project.ext.minecraftVersion = "1.17"
    project.ext.minecraftMajorVersion = "1.17"

    project.ext.majorVersion = '1'
    project.ext.minorVersion = '0'
    project.ext.patchVersion = '0'

    def release = false

    project.ext.apiVersion = project.ext.majorVersion + '.' + project.ext.minorVersion
    project.ext.fullVersion = project.ext.apiVersion + '.' + project.ext.patchVersion
    project.ext.publicationVersion = release ? project.ext.fullVersion : "${project.ext.apiVersion}-latest"

    group = "me.m1dnightninja.${project.ext.archiveName}"
    version = project.ext.fullVersion


    sourceCompatibility = JavaVersion.VERSION_15
    targetCompatibility = JavaVersion.VERSION_15


    tasks.withType(JavaCompile) {
        options.encoding("UTF-8")
    }

    task sourcesJar(type: Jar, dependsOn: classes) {
        classifier("sources")
        from sourceSets.main.allSource
    }

    jar {
        from "LISENCE"
    }

    repositories {
        mavenCentral()
        maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }
        maven { url 'https://mdmc.ddns.net/maven' }
    }
}
